{
    "name": "mapmatching",
    "title": "Map Matching",
    "description": "Snaps raw GPS points to a road network.",
    "version": "1.0.0",
    "icon": "component-default.svg",
    "cartoEnvVars": [],
    "inputs": [
        {
            "name": "input_table",
            "title": "Trajectories table",
            "description": "Table containing the trajectories",
            "type": "Table"
        },
        {
            "name": "roads_table",
            "title": "Road network table",
            "description": "Table containing the road network",
            "optional": true,
            "type": "Table"
        },
        {
            "name": "input_traj_id_column",
            "title": "Trajectory IDs column",
            "description": "Column containing the trajectory IDs",
            "type": "Column",
            "dataType": ["number","string"],
            "parent": "input_table",
            "noDefault": "true",
            "optional": false
        },
        {
            "name": "input_tpoints_column",
            "title": "Trajectory points column",
            "description": "Column containing the points for each trajectory",
            "type": "Column",
            "dataType": ["string"],
            "parent": "input_table",
            "noDefault": "true",
            "optional": false
        },
        {
            "name": "osm_road_bool",
            "title": "Use default OSM road network",
            "description": "If enabled, it will use a OSM network to match the trajectories, otherwise, user can input their own road network.",
            "helper": "If enabled, it will use a OSM network to match the trajectories, otherwise, user can input their own road network.",
            "type": "Boolean",
            "default": true,
            "optional": false
        },
        {
            "name": "road_id",
            "title": "Road segment ID",
            "description": "The column containing the unique road segment ID",
            "type": "Column",
            "parent": "roads_table",
            "dataType": ["number","string"],
            "optional": false,
            "showIf": [
                {
                    "parameter": "osm_road_bool",
                    "value": false
                }
            ]
        },
        {
            "name": "road_geom",
            "title": "Road segment geometry",
            "description": "The column containing geometry of each road segment",
            "type": "Column",
            "parent": "roads_table",
            "dataType": ["geometry","geography"],
            "optional": false,
            "showIf": [
                {
                    "parameter": "osm_road_bool",
                    "value": false
                }
            ]
        },
        {
            "name": "start_node",
            "title": "Start-node column",
            "description": "The column containing the start node ID",
            "type": "Column",
            "parent": "roads_table",
            "dataType": ["number","string"],
            "optional": false,
            "showIf": [
                {
                    "parameter": "osm_road_bool",
                    "value": false
                }
            ]
        },
        {
            "name": "end_node",
            "title": "End-node column",
            "description": "The column containing the end node ID",
            "type": "Column",
            "parent": "roads_table",
            "dataType": ["number","string"],
            "optional": false,
            "showIf": [
                {
                    "parameter": "osm_road_bool",
                    "value": false
                }
            ]
        },
        {
            "name": "projection_bool",
            "title": "Return projected trajectories",
            "description": "If enabled, it will return projected trajectories; otherwise, it will return original trajectories.",
            "helper": "If enabled, it will return projected trajectories; otherwise, it will return original trajectories.",
            "type": "Boolean",
            "default": false,
            "optional": false
        },
        {
            "name": "buffer_radius",
            "title": "Buffer radius (meters)",
            "description": "The padding to buffer around the trace line when intersecting it with the road network",
            "type": "Number",
            "advanced": true,
            "default": 1000
        },
        {
            "name": "distance_epsilon",
            "title": "Distance epsilon (meters)",
            "description": "The distance epsilon to use for matching.",
            "type": "Number",
            "advanced": true,
            "default": 50
        },
        {
            "name": "similarity_cutoff",
            "title": "Similarity cutoff",
            "description": "The similarity cutoff to use for stopping the algorithm.",
            "type": "Number",
            "advanced": true,
            "default": 0.9
        },
        {
            "name": "cutting_threshold",
            "title": "Cutting threshold (meters)",
            "description": "The distance threshold to use for computing cutting points.",
            "type": "Number",
            "advanced": true,
            "default": 10
        },
        {
            "name": "random_cuts",
            "title": "Random cuts",
            "description": "The number of random cuts to add at each iteration.",
            "type": "Number",
            "advanced": true,
            "default": 0
        },
        {
            "name": "distance_threshold",
            "title": "Distance threshold (meters)",
            "description": "The distance threshold above which no match is made.",
            "type": "Number",
            "advanced": true,
            "default": 10000
        }

    ],
    "outputs": [
        {
            "name": "output_table",
            "title": "Output table",
            "description": "The table with the map-matching results.",
            "type": "Table"
        }
    ]
}
